<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIP - Principal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="main-container">
    <!-- Header -->
    <header class="header" style="position: relative;">
      <img src="img/logo copy.png" alt="SIP Logo" class="logo-header">
      <div class="icon-bar">
        <i class="fa-solid fa-layer-group" id="proyectos"></i>
        <i class="fa-regular fa-bell" id="notificaciones"></i>
        <span class="user-circle-big" id="perfil-btn">D</span>
      </div>
    </header>

    <!-- Contenido principal -->
    <main class="feed-container">
      <div class="feed-left">
        <div class="feed-card">
          <span class="user-circle feed-avatar"
            data-inicial="D"
            data-nombre="Daniel Díaz"
            data-rol="Aprendiz"
            data-carrera="Técnico en Programación de Software">D</span>
          <div class="feed-content">
            <div class="feed-text">Hola! Soy nuevo en la plataforma y estoy en busqueda de ideas para el proyecto final.</div>
            <button class="feed-btn">Respuestas</button>
          </div>
        </div>
        <div class="feed-card">
          <span class="user-circle feed-avatar"
            data-inicial="D"
            data-nombre="Daniel Díaz"
            data-rol="Aprendiz"
            data-carrera="Técnico en Programación de Software">D</span>
          <div class="feed-content">
            <div class="feed-text">Hola! Soy nuevo en la plataforma y estoy en busqueda de ideas para el proyecto final.</div>
            <button class="feed-btn">Respuestas</button>
          </div>
        </div>
        <div class="feed-card">
          <span class="user-circle feed-avatar"
            data-inicial="D"
            data-nombre="Daniel Díaz"
            data-rol="Aprendiz"
            data-carrera="Técnico en Programación de Software">D</span>
          <div class="feed-content">
            <div class="feed-text">Hola! Soy nuevo en la plataforma y estoy en busqueda de ideas para el proyecto final.</div>
            <button class="feed-btn">Respuestas</button>
          </div>
        </div>
        <div class="feed-card">
          <span class="user-circle feed-avatar"
            data-inicial="D"
            data-nombre="Daniel Díaz"
            data-rol="Aprendiz"
            data-carrera="Técnico en Programación de Software">D</span>
          <div class="feed-content">
            <div class="feed-text">Hola! Soy nuevo en la plataforma y estoy en busqueda de ideas para el proyecto final.</div>
            <button class="feed-btn">Respuestas</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <hr class="footer-line">
        <div class="footer-icons">
          <i class="fab fa-twitter" id="twitter"></i>
          <i class="fab fa-facebook" id="facebook"></i>
          <i class="fab fa-instagram" id="instagram"></i>
        </div>
        <hr class="footer-line">
      </div>
      <div class="footer-text">
        Copyright © 2025 SENA INTERACTIVE PORTAL
      </div>
      <div class="footer-links">
        <span>Información legal</span>
        <span>Política de privacidad</span>
      </div>
    </footer>
  </div>

  <!-- Popover de respuestas -->
  <div id="respuestas-popover" class="respuestas-popover">
    <div class="respuestas-popover-arrow"></div>
    <div class="comentario-card">
      <span class="user-circle comentario-avatar"
        data-inicial="S"
        data-nombre="Samuel Velasco"
        data-rol="Aprendiz"
        data-carrera="Técnico en Programación de Software">S</span>
      <div class="comentario-content">
        <div class="comentario-nombre">Samuel Velasco</div>
        <div class="comentario-texto">Te tengo la mejor idea del mundo, ¡anímate!</div>
      </div>
    </div>
    <div class="comentario-card">
      <span class="user-circle comentario-avatar"
        data-inicial="D"
        data-nombre="Daniel Díaz"
        data-rol="Aprendiz"
        data-carrera="Técnico en Programación de Software">D</span>
      <div class="comentario-content">
        <div class="comentario-nombre">Daniel Díaz</div>
        <div class="comentario-texto">¡Gracias! Yo también estoy buscando ideas.</div>
      </div>
    </div>
    <div class="comentario-card">
      <span class="user-circle comentario-avatar"
        data-inicial="T"
        data-nombre="Tú"
        data-rol="Aprendiz"
        data-carrera="Técnico en Programación de Software">T</span>
      <div class="comentario-content">
        <div class="comentario-nombre">Tú</div>
        <div class="comentario-texto">¡Me interesa! ¿Puedes contarme más?</div>
      </div>
    </div>
    <button class="close-popover" onclick="document.getElementById('respuestas-popover').style.display='none'">Cerrar</button>
  </div>

  <!-- Popover de perfil para avatar interactivo -->
  <div id="perfil-popover" class="perfil-popover">
    <div class="perfil-popover-arrow"></div>
    <div class="perfil-avatar">D</div>
    <div class="perfil-nombre">Daniel Díaz</div>
    <div class="perfil-rol">Aprendiz</div>
    <div class="perfil-carrera">Técnico en Programación de Software</div>
    <button class="perfil-btn">Ver perfil</button>
  </div>

  <!-- Menú de perfil (D arriba a la derecha) -->
  <div id="menu-perfil" class="menu-perfil">
    <div class="menu-perfil-arrow"></div>
    <ul>
      <li><i class="fa-regular fa-user"></i> Perfil</li>
      <li><i class="fa-solid fa-gear"></i> Configuración</li>
      <li><i class="fa-regular fa-circle-question"></i> Ayuda</li>
      <li><i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión</li>
    </ul>
  </div>

  <!-- Menú de notificaciones (campanita) -->
  <div id="menu-notificaciones" class="menu-notificaciones">
    <div class="menu-notificaciones-arrow"></div>
    <div class="notificaciones-titulo">Notificaciones</div>
    <div class="notificacion-item">
      <span class="notificacion-avatar">A</span>
      <div class="notificacion-content">
        <div class="notificacion-main">Respondió tu publicación</div>
        <div class="notificacion-desc">Te dare varias ideas para tu proyecto...</div>
      </div>
    </div>
    <div class="notificacion-item">
      <span class="notificacion-avatar">J</span>
      <div class="notificacion-content">
        <div class="notificacion-main">Respondió tu publicación</div>
        <div class="notificacion-desc">Te dare varias ideas para tu proyecto...</div>
      </div>
    </div>
    <div class="notificacion-item">
      <span class="notificacion-avatar">D</span>
      <div class="notificacion-content">
        <div class="notificacion-main">Respondió tu respuesta</div>
        <div class="notificacion-desc">Muchas gracias me sirvió mucho, sig...</div>
      </div>
    </div>
  </div>

  <script>
    // Popover de perfil interactivo para los avatares
    const perfilPopover = document.getElementById('perfil-popover');
    document.getElementById('proyectos').onclick = () => {
    window.location.href = '../../proyectos/html/proyectos.html';
  };
    document.querySelectorAll('.feed-avatar, .comentario-avatar').forEach(avatar => {
      avatar.style.cursor = 'pointer';
      avatar.onclick = function(e) {
        e.stopPropagation();
        closeMenus(); // Cierra otros menús
        const inicial = avatar.getAttribute('data-inicial') || avatar.textContent.trim();
        const nombre = avatar.getAttribute('data-nombre') || 'Nombre Apellido';
        const rol = avatar.getAttribute('data-rol') || 'Aprendiz';
        const carrera = avatar.getAttribute('data-carrera') || 'Técnico en Programación de Software';
        perfilPopover.querySelector('.perfil-avatar').textContent = inicial;
        perfilPopover.querySelector('.perfil-nombre').textContent = nombre;
        perfilPopover.querySelector('.perfil-rol').textContent = rol;
        perfilPopover.querySelector('.perfil-carrera').textContent = carrera;
        const rect = avatar.getBoundingClientRect();
        perfilPopover.style.display = 'block';
        perfilPopover.style.top = (window.scrollY + rect.bottom + 12) + 'px';
        perfilPopover.style.left = (window.scrollX + rect.left + rect.width/2 - perfilPopover.offsetWidth/2) + 'px';
      };
    });
    perfilPopover.onclick = function(e) {
      e.stopPropagation();
    };
    
    // Popover de respuestas al hacer click en "Respuestas"
    const respuestasPopover = document.getElementById('respuestas-popover');
    document.querySelectorAll('.feed-btn').forEach(btn => {
      btn.onclick = function(e) {
        e.stopPropagation();
        closeMenus();
        respuestasPopover.style.display = 'block';
        // Posiciona el popover al lado derecho del feed-card y centra verticalmente
        const card = btn.closest('.feed-card');
        const rect = card.getBoundingClientRect();
        respuestasPopover.style.top = (window.scrollY + rect.top + rect.height/2 - respuestasPopover.offsetHeight/2) + 'px';
        respuestasPopover.style.left = (window.scrollX + rect.right + 16) + 'px'; // 16px de separación opcional
      };
    });
    respuestasPopover.onclick = function(e) {
      e.stopPropagation();
    };
    
    // Menú de perfil (D arriba a la derecha)
    const menuPerfil = document.getElementById('menu-perfil');
    const perfilBtn = document.getElementById('perfil-btn');
    perfilBtn.onclick = function(e) {
      e.stopPropagation();
      closeMenus('perfil');
      menuPerfil.style.display = menuPerfil.style.display === 'block' ? 'none' : 'block';
    };
    menuPerfil.onclick = function(e) {
      e.stopPropagation();
    };
    
    // Menú de notificaciones (campanita)
    const menuNotificaciones = document.getElementById('menu-notificaciones');
    const notificacionesBtn = document.getElementById('notificaciones');
    notificacionesBtn.onclick = function(e) {
      e.stopPropagation();
      closeMenus('notificaciones');
      menuNotificaciones.style.display = menuNotificaciones.style.display === 'block' ? 'none' : 'block';
    };
    menuNotificaciones.onclick = function(e) {
      e.stopPropagation();
    };
    
    // Cerrar todos los menús/popovers
    function closeMenus(except) {
      perfilPopover.style.display = 'none';
      respuestasPopover.style.display = 'none';
      if (except !== 'perfil') menuPerfil.style.display = 'none';
      if (except !== 'notificaciones') menuNotificaciones.style.display = 'none';
    }
    
    // Cerrar todo al hacer click fuera
    document.addEventListener('click', function() {
      closeMenus();
    });
    
    // Footer icons
    document.getElementById('twitter').onclick = () => window.open('https://twitter.com', '_blank');
    document.getElementById('facebook').onclick = () => window.open('https://facebook.com', '_blank');
    document.getElementById('instagram').onclick = () => window.open('https://instagram.com', '_blank');
  </script>
</body>
</html>